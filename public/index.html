<html ng-app="medsApp">
<head>
    <link href="javascripts/jquery-ui-1.11.4.custom/jquery-ui.min.css" rel="stylesheet" />
    <script src="javascripts/jquery-2.1.4.min.js"></script>
    <script src="javascripts/jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>
    <script src="javascripts/angular.min.js"></script>
    <script src="javascripts/medsApp.js"></script>
    <script src="javascripts/controllers/mainController.js"></script>
</head>
<body ng-controller="mainController">

    <div id="medTabs">
        <ul>
            <li><a href="#administrations">Administrations</a></li>
            <li><a href="#medications">Medications</a></li>
        </ul>
        <div id="administrations">
            Administrations
            <div id="divAddAdministrations">

            </div>
        </div>
        <div id="medications">
            Medications
            <div id="divAddMedication">
                Medication Name: <input type="text" ng-model="addMedText" /><br />
                <button ng-click="addMed()">Add</button>
            </div>
            <br />
            <br />
            <div id="medList">
                <div ng-repeat="med in meds track by med.id">
                    <button ng-click="showMedDosage(med.id)">Dosages</button>
                    <span ng-show="!editModeMedicationEnabled[med.id]">{{med.Name}}</span><input ng-show="editModeMedicationEnabled[med.id]" type="text" ng-model="med.Name" />
                    <button style="float:right;" ng-click="deleteMed(med.id)">X</button>
                    <button style="float:right;margin-right:15px;" ng-click="updateMed(med)">{{editModeMedicationEnabled[med.id] ? 'Update' : 'Edit'}}</button>
                    <div ng-show="medDosageShowing[med.id] != undefined && medDosageShowing[med.id] != null && medDosageShowing[med.id] != false">
                        <ul style="list-style:none;">
                            <li><button ng-show="addMedDosageShowing[med.id] == undefined || addMedDosageShowing[med.id] == null || addMedDosageShowing[med.id] == false" ng-click="addMedDosage(med.id)">Add Dosage</button></li>
                            <li ng-show="addMedDosageShowing[med.id] != undefined && addMedDosageShowing[med.id] != null && addMedDosageShowing[med.id] != false">
                                <input type="text" ng-model="addMedDosageText[med.id]" />
                                <button ng-click="addMedDosageDone(med.id)">Done</button>
                                <button ng-click="addMedDosageCancel(med.id)">Cancel</button>
                            </li>
                            <li>

                            </li>
                        </ul>
                        <table>
                            <thead><tr><th>Dosage</th><th>Last Modified</th></tr></thead>
                            <tbody ng-repeat="medDose in medDosages[med._id] track by medDose._id">

                                <tr> <td>{{medDose.Dosage}} </td><td>{{medDose.DateModified}}</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <br />
                    <hr />
                </div>
            </div>
        </div>
    </div>
    <div id="divOutput">
        <div ng-repeat="line in outputLines track by $index">
            {{line}}<br />
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#medTabs").tabs();
        });
    </script>
</body>
</html>